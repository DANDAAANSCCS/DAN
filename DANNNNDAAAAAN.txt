-- Cargar UI
local Library = loadstring(game:HttpGet("https://raw.githubusercontent.com/xHeptc/Kavo-UI-Library/main/source.lua"))()
local Window = Library.CreateLib("Auto TP Loop por Chat + Auto Chat", "Ocean")

local MainTab = Window:NewTab("Main")
local MainSection = MainTab:NewSection("Todo activo automÃ¡ticamente")

local Players = game:GetService("Players")
local player = Players.LocalPlayer
local objetivoNombre = ""

-- Conectarse al evento Chatted de todos los jugadores (incluidos nuevos)
local function conectarJugador(jugador)
    if jugador == player then return end
    jugador.Chatted:Connect(function(msg)
        objetivoNombre = jugador.Name
    end)
end

-- Conectar a todos los jugadores actuales
for _, v in pairs(Players:GetPlayers()) do
    conectarJugador(v)
end

-- Conectar a nuevos jugadores que se unan
Players.PlayerAdded:Connect(conectarJugador)

-- âœ… Anti-AFK
for _, v in pairs(getconnections(player.Idled)) do
    v:Disable()
end
player.Idled:Connect(function()
    game:GetService("VirtualUser"):Button2Down(Vector2.new(), workspace.CurrentCamera.CFrame)
    wait(1)
    game:GetService("VirtualUser"):Button2Up(Vector2.new(), workspace.CurrentCamera.CFrame)
end)

-- âœ… No Clip permanente
game:GetService("RunService").Stepped:Connect(function()
    local char = player.Character
    if char then
        for _, part in pairs(char:GetDescendants()) do
            if part:IsA("BasePart") then
                part.CanCollide = false
            end
        end
    end
end)

-- âœ… Anti-Knockback
local LastPosition = nil
spawn(function()
    while true do
        task.wait()
        local char = player.Character
        if char and char:FindFirstChild("HumanoidRootPart") then
            local root = char.HumanoidRootPart
            if root.AssemblyLinearVelocity.Magnitude > 250 or root.AssemblyAngularVelocity.Magnitude > 250 then
                root.AssemblyLinearVelocity = Vector3.zero
                root.AssemblyAngularVelocity = Vector3.zero
                if LastPosition then
                    root.CFrame = LastPosition
                end
            elseif root.AssemblyLinearVelocity.Magnitude < 50 then
                LastPosition = root.CFrame
            end
        end
    end
end)

-- âœ… TP loop hacia el Ãºltimo jugador que hablÃ³ (posiciÃ³n detrÃ¡s)
spawn(function()
    while true do
        wait(0.5)
        pcall(function()
            if objetivoNombre == "" then return end
            local objetivo = Players:FindFirstChild(objetivoNombre)
            local myChar = player.Character
            if objetivo and objetivo.Character and myChar then
                local myRoot = myChar:FindFirstChild("HumanoidRootPart")
                local objRoot = objetivo.Character:FindFirstChild("HumanoidRootPart")
                if myRoot and objRoot then
                    local atras = objRoot.CFrame.LookVector * -2
                    myRoot.CFrame = objRoot.CFrame + atras
                end
            end
        end)
    end
end)

-- âœ… EnvÃ­o de mensajes automÃ¡ticos al chat cada 60 segundos
local mensajesAuto = {
    "Â¿QuiÃ©n quiere pelear? ðŸ˜ˆ",
    "Estoy viendo todo B)",
    "No huyas jaja",
    "AquÃ­ farm tranquilo...",
    "Â¿Y mis poderes? ðŸ¤”",
    "Â¿QuiÃ©n fue el que hablÃ³?",
    "Voy por ti ðŸ‘€",
    "No pueden escapar de mÃ­"
}

spawn(function()
    while true do
        task.wait(60)
        local mensaje = mensajesAuto[math.random(1, #mensajesAuto)]
        pcall(function()
            game:GetService("ReplicatedStorage").DefaultChatSystemChatEvents.SayMessageRequest:FireServer(mensaje, "All")
        end)
    end
end)

-- Info en UI
MainSection:NewLabel("TP Loop + NoClip + AntiKB + AntiAFK + Auto Chat 60s")

